{"version":3,"sources":["src/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["'use strict';\n\nvar isArray = Array.isArray || function(obj) {\n  return Object.prototype.toString.call( arg ) === '[object Array]';\n}\nvar isObject = function(obj) {\n  return obj === Object(obj);\n}\n\nexport function deepExtend() {\n  if (arguments.length < 1 || typeof arguments[0] !== 'object') {\n    return false;\n  } else if (arguments.length < 2) {\n    return arguments[0];\n  }\n\n  var target = arguments[0];\n  var args = Array.prototype.slice.call(arguments, 1);\n  var key, val, src, clone, tmpBuf;\n\n  args.forEach(function (obj) {\n    if (typeof obj !== 'object') return;\n\n    for (key in obj) {\n      if ( ! (key in obj)) continue;\n      src = target[key];\n      val = obj[key];\n\n      if (val === target) continue;\n\n      if (typeof val !== 'object' || val === null) {\n        target[key] = val;\n        continue;\n      } else if (val instanceof Buffer) {\n        tmpBuf = new Buffer(val.length);\n        val.copy(tmpBuf);\n        target[key] = tmpBuf;\n        continue;\n      } else if (val instanceof Date) {\n        target[key] = new Date(val.getTime());\n        continue;\n      }\n\n      if (typeof src !== 'object' || src === null) {\n        clone = (isArray(val)) ? [] : {};\n        target[key] = deepExtend(clone, val);\n        continue;\n      }\n\n      if (isArray(val)) {\n        clone = (isArray(src)) ? src : [];\n      } else {\n        clone = (!isArray(src)) ? src : {};\n      }\n\n      target[key] = deepExtend(clone, val);\n    }\n  });\n\n  return target;\n}\n\nexport function mixin() {\n  return {\n    deepExtend\n  }\n}\n\nexport class Eredita {\n  constructor(data, parent) {\n    this.data = data;\n    this.parent = parent;\n    this.dirty = false;\n  }\n  dot(path, value) {\n    var parts = path ? path.split('.') : [];\n    var ref = this.data;\n    if (typeof value === 'undefined') {\n      for (var i = 0, max = parts.length ; typeof ref !== 'undefined' && i < max; i++) {\n        ref = ref[parts[i]];\n      }\n    } else {\n      for (var i = 0, max = parts.length - 1, p = null ; p = parts[i], i < max; i++) {\n        if (typeof ref[p] !== 'object') {\n          ref[p] = (parseInt(parts[i + 1]) || parts[i + 1] == 0) ? [] : {};\n        }\n        ref = ref[p];\n      }\n      ref[p] = value;\n      ref = ref[p];\n    }\n    return ref;\n  }\n  getPath(path) {\n    var v = this.dot(path);\n    return typeof v === 'undefined' ? (this.parent ? this.parent.get(path): undefined) : v;\n  }\n  getTypedPath(path, _type, _default) {\n    var v = this.get(path);\n    if (isObject(v) && !isArray(v)) {\n      var type = _type.toLowerCase();\n      if (typeof v[type] !== 'undefined') {\n        return v[type];\n      } else if (_default) {\n        return v[_default];\n      } else {\n        return undefined;\n      }\n    } else {\n      return v;\n    }\n  }\n  setPath(path, value) {\n    this.dirty = true;\n    return this.dot(path, value);\n  }\n  unsetPath(path) {\n    return this.set(path, null);\n  }\n  mergePath(path) {\n    var p = this.parent;\n    var _parent = p ? p.merge(path) : null;\n    var _self = this.get(path);\n    if (!_parent) {\n      return deepExtend({}, _self);\n    } else {\n      return deepExtend(_parent, _self);\n    }\n  }\n  isDirty() {\n    return this.dirty;\n  }\n}\n"]}